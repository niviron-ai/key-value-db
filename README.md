# @dieugene/key-value-db

[![License: ISC](https://img.shields.io/badge/License-ISC-blue.svg)](https://opensource.org/licenses/ISC)

–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö –∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ YDB (Yandex Database). –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø—Ä–æ—Å—Ç–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è, –ø–æ–ª—É—á–µ–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è JSON-–¥–∞–Ω–Ω—ã–º–∏ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –¥–æ–º–µ–Ω–æ–≤ –∏ –≥–∏–±–∫–∏–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏ –ø–æ–∏—Å–∫–∞.

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- üîë **–†–∞–±–æ—Ç–∞ —Å –∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–∏**: –ü—Ä–æ—Å—Ç–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ JSON-–æ–±—ä–µ–∫—Ç–æ–≤
- üè∑Ô∏è **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–æ–º–µ–Ω–æ–≤**: –õ–æ–≥–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ –¥–æ–º–µ–Ω–∞–º —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –ø—Ä–µ—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- üîç **–ì–∏–±–∫–∏–π –ø–æ–∏—Å–∫**: –ü–æ–∏—Å–∫ –ø–æ –ø—Ä–µ—Ñ–∏–∫—Å—É, —Å—É—Ñ—Ñ–∏–∫—Å—É –∏–ª–∏ –ø–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∑–∞–ø–∏—Å–µ–π –¥–æ–º–µ–Ω–∞
- ‚ö° **–ú–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏**: –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –∑–∞–ø–∏—Å–µ–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- üìã **–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö**: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π –º–µ–∂–¥—É –∫–ª—é—á–∞–º–∏
- üóÑÔ∏è **YDB –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Yandex Database –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
npm install @dieugene/key-value-db
```

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js >= 16.0.0
- Yandex Database (YDB) serverless instance

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```javascript
const { init } = require('@dieugene/key-value-db');

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–µ–∑ –¥–æ–º–µ–Ω–∞
const db = init();

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å –¥–æ–º–µ–Ω–æ–º
const userDb = init('users', {
  table_name: 'my_table',
  database: process.env.YDB_ADDRESS
});

// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
await db.set('user:123', { name: 'John', age: 30 });

// –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
const user = await db.get('user:123', null);
console.log(user); // { name: 'John', age: 30 }

// –£–¥–∞–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
await db.del('user:123');
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ YDB:

```bash
export YDB_ADDRESS="/ru-central..."
```

–ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env`:

```env
YDB_ADDRESS=/ru-central...
```

## API

### `init(domain, options)`

–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –¥–æ–º–µ–Ω–æ–≤.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `domain` (string, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `''`) - –ü—Ä–µ—Ñ–∏–∫—Å –¥–æ–º–µ–Ω–∞ –¥–ª—è –≤—Å–µ—Ö –∫–ª—é—á–µ–π. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- `options` (Object, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `{}`) - –û–ø—Ü–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
  - `table_name` (string, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `'key_object_db'`) - –ò–º—è —Ç–∞–±–ª–∏—Ü—ã –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö YDB
  - `database` (string, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `process.env.YDB_ADDRESS`) - –ê–¥—Ä–µ—Å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö YDB

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `Object` - –û–±—ä–µ–∫—Ç —Å –º–µ—Ç–æ–¥–∞–º–∏ `get`, `set`, `del`, `copy` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î

**–ü—Ä–∏–º–µ—Ä:**
```javascript
const db = init('users', {
  table_name: 'my_custom_table',
  database: '/ru-central1/b1abc2def3ghi4jkl5/etn6op7qrs8tu9vwx0'
});
```

### –ú–µ—Ç–æ–¥—ã —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏

#### `get(id, by_default)`

–ü–æ–ª—É—á–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ –∫–ª—é—á—É –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `id` (string, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `''`) - –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–ª—é—á–∞
- `by_default` (any) - –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –µ—Å–ª–∏ –∫–ª—é—á –Ω–µ –Ω–∞–π–¥–µ–Ω

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `Promise<any>` - –°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

**–ü—Ä–∏–º–µ—Ä:**
```javascript
const user = await db.get('user:123', { name: 'Unknown' });
```

#### `get.list(id_list)`

–ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∑–∞–ø–∏—Å–µ–π –ø–æ –º–∞—Å—Å–∏–≤—É –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `id_list` (Array<string>, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `[]`) - –ú–∞—Å—Å–∏–≤ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `Promise<Array<{id: string, data: object}>>` - –ú–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤, —Å–æ–¥–µ—Ä–∂–∞—â–∏—Ö id –∏ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–ª—é—á–∞

> **–í–∞–∂–Ω–æ:** –§—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç—ã —Å –ø–æ–ª—è–º–∏ `id` –∏ `data`, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã–µ. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –∫–∞–∫ —Å–∞–º–∏ –¥–∞–Ω–Ω—ã–µ, —Ç–∞–∫ –∏ –∏—Ö –ø–æ–ª–Ω—ã–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –≤ –ë–î.

**–ü—Ä–∏–º–µ—Ä:**
```javascript
const users = await db.get.list(['user:1', 'user:2', 'user:3']);
// –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: [
//   { id: 'users::user:1', data: { name: 'John' } },
//   { id: 'users::user:2', data: { name: 'Jane' } },
//   { id: 'users::user:3', data: { name: 'Bob' } }
// ]

// –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã—Ö
const userData = users.map(user => user.data);
```

#### `get.where_id_starts_with(startsWith)`

–ü–æ–ª—É—á–∞–µ—Ç –≤—Å–µ –∑–∞–ø–∏—Å–∏, —É –∫–æ—Ç–æ—Ä—ã—Ö –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –∑–∞–¥–∞–Ω–Ω–æ–π —Å—Ç—Ä–æ–∫–∏.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `startsWith` (string, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `''`) - –ü—Ä–µ—Ñ–∏–∫—Å –¥–ª—è –ø–æ–∏—Å–∫–∞. –ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–æ–º–µ–Ω

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `Promise<Array<{id: string, data: any}>>` - –ú–∞—Å—Å–∏–≤ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π

**–ü—Ä–∏–º–µ—Ä:**
```javascript
const users = await db.get.where_id_starts_with('user:');
// –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: [{ id: 'users::user:123', data: { name: 'John' } }, ...]
```

#### `get.where_id_ends_with(endsWith)`

–ü–æ–ª—É—á–∞–µ—Ç –≤—Å–µ –∑–∞–ø–∏—Å–∏ –¥–æ–º–µ–Ω–∞, —É –∫–æ—Ç–æ—Ä—ã—Ö –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –∑–∞–¥–∞–Ω–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `endsWith` (string, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `''`) - –°—É—Ñ—Ñ–∏–∫—Å –¥–ª—è –ø–æ–∏—Å–∫–∞

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `Promise<Array<{id: string, data: any}>>` - –ú–∞—Å—Å–∏–≤ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π

**–ü—Ä–∏–º–µ—Ä:**
```javascript
const admins = await db.get.where_id_ends_with(':admin');
// –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–∞–ø–∏—Å–∏ —Å –∫–ª—é—á–∞–º–∏, –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—â–∏–º–∏—Å—è –Ω–∞ ':admin'
```

#### `get.all()`

–ü–æ–ª—É—á–∞–µ—Ç –≤—Å–µ –∑–∞–ø–∏—Å–∏ —Ç–µ–∫—É—â–µ–≥–æ –¥–æ–º–µ–Ω–∞.

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `Promise<Array<{id: string, data: any}>>` - –ú–∞—Å—Å–∏–≤ –≤—Å–µ—Ö –∑–∞–ø–∏—Å–µ–π –¥–æ–º–µ–Ω–∞

**–ü—Ä–∏–º–µ—Ä:**
```javascript
const allData = await db.get.all();
```

#### `set(id, data)`

–°–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ –∫–ª—é—á—É –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `id` (string, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `''`) - –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–ª—é—á–∞
- `data` (any, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `{}`) - –î–∞–Ω–Ω—ã–µ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è (–±—É–¥—É—Ç —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤ JSON)

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `Promise<any>` - –°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

**–ü—Ä–∏–º–µ—Ä:**
```javascript
await db.set('user:123', { name: 'John', role: 'admin' });
```

#### `set.bulk(data_list)`

–ú–∞—Å—Å–æ–≤–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `data_list` (Array<{id: string, data: any}>, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `[]`) - –ú–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ —Å –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞–º–∏ –∏ –¥–∞–Ω–Ω—ã–º–∏

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `Promise<void>`

**–ü—Ä–∏–º–µ—Ä:**
```javascript
await db.set.bulk([
  { id: 'user:1', data: { name: 'John' } },
  { id: 'user:2', data: { name: 'Jane' } },
  { id: 'user:3', data: { name: 'Bob' } }
]);
```

#### `set.sub_domain(subDomain)`

–°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä –ë–î —Å –≤–ª–æ–∂–µ–Ω–Ω—ã–º –¥–æ–º–µ–Ω–æ–º.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `subDomain` (string) - –ò–º—è –ø–æ–¥–¥–æ–º–µ–Ω–∞

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `Object` - –ù–æ–≤—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä –ë–î —Å –¥–æ–º–µ–Ω–æ–º `${currentDomain}::${subDomain}`

**–ü—Ä–∏–º–µ—Ä:**
```javascript
const profileDb = db.set.sub_domain('profiles');
// –ö–ª—é—á–∏ –±—É–¥—É—Ç –∏–º–µ—Ç—å –ø—Ä–µ—Ñ–∏–∫—Å: users::profiles::
await profileDb.set('avatar', { url: '/images/avatar.jpg' });
```

#### `copy(from_id, to_id, value_if_null)`

–ö–æ–ø–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ—Ç –æ–¥–Ω–æ–≥–æ –∫–ª—é—á–∞ –∫ –¥—Ä—É–≥–æ–º—É.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `from_id` (string, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `''`) - –ò—Å—Ö–æ–¥–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- `to_id` (string, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `''`) - –¶–µ–ª–µ–≤–æ–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- `value_if_null` (any, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `{}`) - –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –µ—Å–ª–∏ –∏—Å—Ö–æ–¥–Ω—ã–π –∫–ª—é—á –Ω–µ –Ω–∞–π–¥–µ–Ω

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `Promise<void>`

**–ü—Ä–∏–º–µ—Ä:**
```javascript
await db.copy('user:123', 'user:123:backup', { name: 'Default' });
```

#### `del(id)`

–£–¥–∞–ª—è–µ—Ç –∑–∞–ø–∏—Å—å –ø–æ –∫–ª—é—á—É –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `id` (string, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `''`) - –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–ª—é—á–∞ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `Promise<void>`

**–ü—Ä–∏–º–µ—Ä:**
```javascript
await db.del('user:123');
```

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –†–∞–±–æ—Ç–∞ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

```javascript
const { init } = require('@dieugene/key-value-db');

const userDb = init('users');

// –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
await userDb.set('123', {
  id: 123,
  name: 'John Doe',
  email: 'john@example.com',
  created: new Date().toISOString()
});

// –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
const user = await userDb.get('123');

// –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
const allUsers = await userDb.get.all();

// –ü–æ–∏—Å–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
const admins = await userDb.get.where_id_ends_with(':admin');

// –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
const specificUsers = await userDb.get.list(['123', '456', '789']);
// –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤: [{ id: 'users::123', data: {...} }, ...]

// –†–∞–±–æ—Ç–∞ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ get.list()
specificUsers.forEach(user => {
  console.log(`ID: ${user.id}, Name: ${user.data.name}`);
});
```

### –†–∞–±–æ—Ç–∞ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```javascript
const configDb = init('config');

// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
await configDb.set('app', {
  theme: 'dark',
  language: 'ru',
  notifications: true
});

// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
await configDb.set('user:123', {
  theme: 'light',
  autoSave: true
});

// –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
const allConfigs = await configDb.get.all();
```

### –ú–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

```javascript
const productDb = init('products');

// –ú–∞—Å—Å–æ–≤–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤
await productDb.set.bulk([
  { id: 'product:1', data: { name: 'Laptop', price: 999 } },
  { id: 'product:2', data: { name: 'Mouse', price: 29 } },
  { id: 'product:3', data: { name: 'Keyboard', price: 79 } }
]);

// –ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
const electronics = await productDb.get.where_id_starts_with('product:');
```

### –†–∞–±–æ—Ç–∞ —Å –ø–æ–¥–¥–æ–º–µ–Ω–∞–º–∏

```javascript
const mainDb = init('store');

// –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥–¥–æ–º–µ–Ω–æ–≤
const productsDb = mainDb.set.sub_domain('products');
const ordersDb = mainDb.set.sub_domain('orders');

// –î–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã —Å –ø—Ä–µ—Ñ–∏–∫—Å–∞–º–∏:
// store::products:: –∏ store::orders::
await productsDb.set('laptop', { name: 'Gaming Laptop', price: 1299 });
await ordersDb.set('order:1', { productId: 'laptop', quantity: 1 });
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–æ–º–µ–Ω–æ–≤

–î–æ–º–µ–Ω—ã –ø–æ–∑–≤–æ–ª—è—é—Ç –ª–æ–≥–∏—á–µ—Å–∫–∏ —Ä–∞–∑–¥–µ–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ. –ö–ª—é—á–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞—é—Ç –ø—Ä–µ—Ñ–∏–∫—Å –¥–æ–º–µ–Ω–∞:

```javascript
// –ë–µ–∑ –¥–æ–º–µ–Ω–∞
const db = init();
await db.set('user:123', data); // –ö–ª—é—á: user:123

// –° –¥–æ–º–µ–Ω–æ–º
const userDb = init('users');
await userDb.set('123', data); // –ö–ª—é—á: users::123

// –° –ø–æ–¥–¥–æ–º–µ–Ω–æ–º
const profileDb = userDb.set.sub_domain('profiles');
await profileDb.set('avatar', data); // –ö–ª—é—á: users::profiles::avatar
```

## –õ–∏—Ü–µ–Ω–∑–∏—è

ISC ¬© Eugene Ditkovsky
 
